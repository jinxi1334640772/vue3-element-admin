import{a as e,c as l,k as a,d as t,r as o,J as r,o as d,cq as i,a3 as s,w as n,f as p,aU as u,a2 as m,O as c,l as f,t as y,ad as h,ai as b,bQ as _,c_ as v,c$ as V,d0 as k,d1 as w,a6 as g,d2 as j,ae as U,d3 as T,aV as C,aW as A}from"./index-fc1fece1.js";import{v as E}from"./el-loading-04e1a0cc.js";import{E as N}from"./el-dialog-01c3b66c.js";import{E as x}from"./el-input-number-968da3ab.js";import"./el-tooltip-4ed993c7.js";import{E as O}from"./el-popper-9e1b1986.js";import{b as I,a as L}from"./el-radio-group-99333aab.js";import{_ as M,b as q,a as B}from"./refresh-b04a06d0.js";/* empty css               */import"./el-select-3ca207e4.js";import"./el-scrollbar-6191da80.js";import"./el-tree-ad44efcd.js";import"./el-checkbox-576a7d1f.js";import{E as G}from"./el-tree-select-77b5b5c1.js";import{E as K}from"./el-card-a053229b.js";import{E as S,a as X}from"./el-table-column-d41e5bab.js";import{_ as F}from"./plus-fea4bfec.js";import{E as R,a as z}from"./el-form-item-ee61911b.js";import{_ as J}from"./search-97813106.js";import{S as P}from"./index-0c8bd28d.js";import{I as Q}from"./index-c346f624.js";import{E as W}from"./index-38a4db7f.js";import"./refs-60649acf.js";import"./isUndefined-d281c39a.js";import"./strings-6a063601.js";import"./isEqual-dcbfb0df.js";import"./_Uint8Array-88388be3.js";import"./debounce-ad5189ec.js";import"./index-96208ded.js";import"./hasIn-8f87df45.js";import"./index-44a372ac.js";import"./_initCloneObject-b6989d56.js";import"./castArray-6e608752.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./el-divider-a32c6757.js";import"./dropdown-aac30d7c.js";const H={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Y=[a("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896a448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352c-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992c13.376-19.712 35.2-28.864 66.176-28.864c23.936 0 42.944 6.336 56.32 19.712c12.672 13.376 19.712 31.68 19.712 54.912c0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408c-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76c6.336-12.672 15.488-24.64 28.16-35.2c33.792-29.568 54.208-48.576 60.544-55.616c16.896-22.528 26.048-51.392 26.048-86.592c0-42.944-14.08-76.736-42.24-101.376c-28.16-25.344-65.472-37.312-111.232-37.312m-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784a49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72a51.968 51.968 0 0 0-15.488-38.016a55.936 55.936 0 0 0-39.424-14.784"},null,-1)];const $={name:"ep-question-filled",render:function(a,t){return e(),l("svg",H,[...Y])}};var D=(e=>(e.CATALOG="CATALOG",e.MENU="MENU",e.BUTTON="BUTTON",e.EXTLINK="EXTLINK",e))(D||{});const Z={class:"app-container"},ee={class:"search-container"},le=a("br",null,null,-1),ae={class:"dialog-footer"},te=t({name:"Menu",inheritAttrs:!1,__name:"index",setup(t){const H=o(R),Y=o(R),te=o(!1),oe=r({title:"",visible:!1}),re=r({}),de=o([]),ie=o([]),se=r({parentId:0,visible:1,sort:1,type:D.MENU,alwaysShow:0,keepAlive:0}),ne=r({parentId:[{required:!0,message:"请选择顶级菜单",trigger:"blur"}],name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],component:[{required:!0,message:"请输入组件路径",trigger:"blur"}],visible:[{required:!0,message:"请输入路由路径",trigger:"blur"}]}),pe=o(),ue=r({type:"",path:""});function me(){te.value=!0,v(re).then((({data:e})=>{de.value=e})).then((()=>{te.value=!1}))}function ce(){H.value.resetFields(),me()}function fe(e){pe.value=e.id}function ye(e,l){V().then((({data:e})=>{ie.value=[{value:0,label:"顶级菜单",children:e}]})).then((()=>{oe.visible=!0,l?(oe.title="编辑菜单",k(l).then((({data:e})=>{Object.assign(se,e),ue.type=e.type,ue.path=e.path??""}))):(oe.title="新增菜单",se.parentId=e)}))}function he(){se.type!==ue.type?se.path="":se.path=ue.path}function be(){Y.value.validate((e=>{if(e){const e=se.id;e?w(e,se).then((()=>{g.success("修改成功"),_e(),me()})):j(se).then((()=>{g.success("新增成功"),_e(),me()}))}}))}function _e(){oe.visible=!1,Y.value.resetFields(),Y.value.clearValidate(),se.id=void 0,se.parentId=0,se.visible=1,se.sort=1,se.perm=void 0,se.component=void 0,se.path=void 0,se.redirect=void 0,se.alwaysShow=void 0,se.keepAlive=void 0}return d((()=>{me()})),(t,o)=>{const r=C,d=z,v=J,V=A,k=M,w=R,j=F,pe=S,ue=W,ve=q,Ve=B,ke=X,we=K,ge=G,je=I,Ue=L,Te=$,Ce=O,Ae=x,Ee=N,Ne=i("hasPerm"),xe=E;return e(),l("div",Z,[a("div",ee,[s(w,{ref_key:"queryFormRef",ref:H,model:p(re),inline:!0},{default:n((()=>[s(d,{label:"关键字",prop:"keywords"},{default:n((()=>[s(r,{modelValue:p(re).keywords,"onUpdate:modelValue":o[0]||(o[0]=e=>p(re).keywords=e),placeholder:"菜单名称",clearable:"",onKeyup:u(me,["enter"])},null,8,["modelValue"])])),_:1}),s(d,null,{default:n((()=>[s(V,{type:"primary",onClick:me},{icon:n((()=>[s(v)])),default:n((()=>[m("搜索")])),_:1}),s(V,{onClick:ce},{icon:n((()=>[s(k)])),default:n((()=>[m(" 重置")])),_:1})])),_:1})])),_:1},8,["model"])]),s(we,{shadow:"never",class:"table-container"},{header:n((()=>[c((e(),f(V,{type:"success",onClick:o[1]||(o[1]=e=>ye(0))},{icon:n((()=>[s(j)])),default:n((()=>[m(" 新增")])),_:1})),[[Ne,["sys:menu:add"]]])])),default:n((()=>[c((e(),f(ke,{data:p(de),"highlight-current-row":"","row-key":"id","expand-row-keys":["1"],onRowClick:fe,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:n((()=>[s(pe,{label:"菜单名称","min-width":"200"},{default:n((e=>[s(P,{"icon-class":e.row.icon},null,8,["icon-class"]),m(" "+y(e.row.name),1)])),_:1}),s(pe,{label:"类型",align:"center",width:"80"},{default:n((l=>[l.row.type===p(D).CATALOG?(e(),f(ue,{key:0,type:"warning"},{default:n((()=>[m("目录")])),_:1})):h("",!0),l.row.type===p(D).MENU?(e(),f(ue,{key:1,type:"success"},{default:n((()=>[m("菜单")])),_:1})):h("",!0),l.row.type===p(D).BUTTON?(e(),f(ue,{key:2,type:"danger"},{default:n((()=>[m("按钮")])),_:1})):h("",!0),l.row.type===p(D).EXTLINK?(e(),f(ue,{key:3,type:"info"},{default:n((()=>[m("外链")])),_:1})):h("",!0)])),_:1}),s(pe,{label:"路由路径",align:"left",width:"150",prop:"path"}),s(pe,{label:"组件路径",align:"left",width:"250",prop:"component"}),s(pe,{label:"权限标识",align:"center",width:"200",prop:"perm"}),s(pe,{label:"状态",align:"center",width:"80"},{default:n((l=>[1===l.row.visible?(e(),f(ue,{key:0,type:"success"},{default:n((()=>[m("显示")])),_:1})):(e(),f(ue,{key:1,type:"info"},{default:n((()=>[m("隐藏")])),_:1}))])),_:1}),s(pe,{label:"排序",align:"center",width:"80",prop:"sort"}),s(pe,{fixed:"right",align:"center",label:"操作",width:"220"},{default:n((l=>["CATALOG"==l.row.type||"MENU"==l.row.type?c((e(),f(V,{key:0,type:"primary",link:"",size:"small",onClick:b((e=>ye(l.row.id)),["stop"])},{default:n((()=>[s(j),m("新增 ")])),_:2},1032,["onClick"])),[[Ne,["sys:menu:add"]]]):h("",!0),c((e(),f(V,{type:"primary",link:"",size:"small",onClick:b((e=>ye(void 0,l.row.id)),["stop"])},{default:n((()=>[s(ve),m("编辑 ")])),_:2},1032,["onClick"])),[[Ne,["sys:menu:edit"]]]),c((e(),f(V,{type:"primary",link:"",size:"small",onClick:b((e=>function(e){if(!e)return g.warning("请勾选删除项"),!1;U.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{T(e).then((()=>{g.success("删除成功"),me()}))})).catch((()=>g.info("已取消删除")))}(l.row.id)),["stop"])},{default:n((()=>[s(Ve),m(" 删除 ")])),_:2},1032,["onClick"])),[[Ne,["sys:menu:delete"]]])])),_:1})])),_:1},8,["data"])),[[xe,p(te)]])])),_:1}),s(Ee,{modelValue:p(oe).visible,"onUpdate:modelValue":o[16]||(o[16]=e=>p(oe).visible=e),title:p(oe).title,"destroy-on-close":"","append-to-body":"",width:"1000px",onClose:_e,top:"5vh"},{footer:n((()=>[a("div",ae,[s(V,{type:"primary",onClick:be},{default:n((()=>[m("确 定")])),_:1}),s(V,{onClick:_e},{default:n((()=>[m("取 消")])),_:1})])])),default:n((()=>[s(w,{ref_key:"menuFormRef",ref:Y,model:p(se),rules:p(ne),"label-width":"160px"},{default:n((()=>[s(d,{label:"父级菜单",prop:"parentId"},{default:n((()=>[s(ge,{modelValue:p(se).parentId,"onUpdate:modelValue":o[2]||(o[2]=e=>p(se).parentId=e),placeholder:"选择上级菜单",data:p(ie),filterable:"","check-strictly":"","render-after-expand":!1},null,8,["modelValue","data"])])),_:1}),s(d,{label:"菜单名称",prop:"name"},{default:n((()=>[s(r,{modelValue:p(se).name,"onUpdate:modelValue":o[3]||(o[3]=e=>p(se).name=e),placeholder:"请输入菜单名称"},null,8,["modelValue"])])),_:1}),s(d,{label:"菜单类型",prop:"type"},{default:n((()=>[s(Ue,{modelValue:p(se).type,"onUpdate:modelValue":o[4]||(o[4]=e=>p(se).type=e),onChange:he},{default:n((()=>[s(je,{label:"CATALOG"},{default:n((()=>[m("目录")])),_:1}),s(je,{label:"MENU"},{default:n((()=>[m("菜单")])),_:1}),s(je,{label:"BUTTON"},{default:n((()=>[m("按钮")])),_:1}),s(je,{label:"EXTLINK"},{default:n((()=>[m("外链")])),_:1})])),_:1},8,["modelValue"])])),_:1}),"EXTLINK"==p(se).type?(e(),f(d,{key:0,label:"外链地址",prop:"path"},{default:n((()=>[s(r,{modelValue:p(se).path,"onUpdate:modelValue":o[5]||(o[5]=e=>p(se).path=e),placeholder:"请输入外链完整路径"},null,8,["modelValue"])])),_:1})):h("",!0),p(se).type==p(D).CATALOG||p(se).type==p(D).MENU?(e(),f(d,{key:1,label:"路由路径",prop:"path"},{default:n((()=>[p(se).type==p(D).CATALOG?(e(),f(r,{key:0,modelValue:p(se).path,"onUpdate:modelValue":o[6]||(o[6]=e=>p(se).path=e),placeholder:"system"},null,8,["modelValue"])):(e(),f(r,{key:1,modelValue:p(se).path,"onUpdate:modelValue":o[7]||(o[7]=e=>p(se).path=e),placeholder:"user"},null,8,["modelValue"]))])),_:1})):h("",!0),p(se).type==p(D).MENU?(e(),f(d,{key:2,label:"页面路径",prop:"component"},{default:n((()=>[s(r,{modelValue:p(se).component,"onUpdate:modelValue":o[8]||(o[8]=e=>p(se).component=e),placeholder:"system/user/index",style:{width:"95%"}},_({_:2},[p(se).type==p(D).MENU?{name:"prepend",fn:n((()=>[m("src/views/")])),key:"0"}:void 0,p(se).type==p(D).MENU?{name:"append",fn:n((()=>[m(".vue")])),key:"1"}:void 0]),1032,["modelValue"])])),_:1})):h("",!0),p(se).type!==p(D).BUTTON?(e(),f(d,{key:3,prop:"visible",label:"显示状态"},{default:n((()=>[s(Ue,{modelValue:p(se).visible,"onUpdate:modelValue":o[9]||(o[9]=e=>p(se).visible=e)},{default:n((()=>[s(je,{label:1},{default:n((()=>[m("显示")])),_:1}),s(je,{label:0},{default:n((()=>[m("隐藏")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),p(se).type===p(D).CATALOG?(e(),f(d,{key:4,label:"根目录始终显示"},{label:n((()=>[a("div",null,[m(" 根目录始终显示 "),s(Ce,{placement:"bottom",effect:"light"},{content:n((()=>[m("是：根目录只有一个子路由显示目录 "),le,m("否：根目录只有一个子路由不显示目录，只显示子路由 ")])),default:n((()=>[s(Te,{class:"inline-block"})])),_:1})])])),default:n((()=>[s(Ue,{modelValue:p(se).alwaysShow,"onUpdate:modelValue":o[10]||(o[10]=e=>p(se).alwaysShow=e)},{default:n((()=>[s(je,{label:1},{default:n((()=>[m("是")])),_:1}),s(je,{label:0},{default:n((()=>[m("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),p(se).type===p(D).MENU?(e(),f(d,{key:5,label:"是否缓存"},{default:n((()=>[s(Ue,{modelValue:p(se).keepAlive,"onUpdate:modelValue":o[11]||(o[11]=e=>p(se).keepAlive=e)},{default:n((()=>[s(je,{label:1},{default:n((()=>[m("是")])),_:1}),s(je,{label:0},{default:n((()=>[m("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),s(d,{label:"排序",prop:"sort"},{default:n((()=>[s(Ae,{modelValue:p(se).sort,"onUpdate:modelValue":o[12]||(o[12]=e=>p(se).sort=e),style:{width:"100px"},"controls-position":"right",min:0},null,8,["modelValue"])])),_:1}),p(se).type==p(D).BUTTON?(e(),f(d,{key:6,label:"权限标识",prop:"perm"},{default:n((()=>[s(r,{modelValue:p(se).perm,"onUpdate:modelValue":o[13]||(o[13]=e=>p(se).perm=e),placeholder:"sys:user:add"},null,8,["modelValue"])])),_:1})):h("",!0),p(se).type!==p(D).BUTTON?(e(),f(d,{key:7,label:"图标",prop:"icon"},{default:n((()=>[s(Q,{modelValue:p(se).icon,"onUpdate:modelValue":o[14]||(o[14]=e=>p(se).icon=e)},null,8,["modelValue"])])),_:1})):h("",!0),p(se).type==p(D).CATALOG?(e(),f(d,{key:8,label:"跳转路由"},{default:n((()=>[s(r,{modelValue:p(se).redirect,"onUpdate:modelValue":o[15]||(o[15]=e=>p(se).redirect=e),placeholder:"跳转路由"},null,8,["modelValue"])])),_:1})):h("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}});export{te as default};
