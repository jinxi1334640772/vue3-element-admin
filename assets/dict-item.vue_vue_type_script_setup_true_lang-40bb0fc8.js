import{d as e,K as a,r as l,J as t,o,cq as s,a as i,c as d,k as r,a3 as n,w as u,f as p,a2 as m,O as c,l as f,ai as y,aR as _,ad as g,t as b,a6 as v,ae as h,aV as V,aW as C}from"./index-fc1fece1.js";import{v as k}from"./el-loading-04e1a0cc.js";import{E as j}from"./el-dialog-01c3b66c.js";import{b as x,a as U}from"./el-radio-group-99333aab.js";import{_ as w,a as S,b as E}from"./refresh-b04a06d0.js";import{E as N}from"./el-input-number-968da3ab.js";import{E as q}from"./el-card-a053229b.js";import{_ as F}from"./index-a7700734.js";import{E as z,a as R}from"./el-table-column-d41e5bab.js";import"./el-checkbox-576a7d1f.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-9e1b1986.js";import"./el-scrollbar-6191da80.js";/* empty css               */import{_ as T}from"./plus-fea4bfec.js";import{E as B,a as D}from"./el-form-item-ee61911b.js";import{_ as K}from"./search-97813106.js";import{a as O,b as P,u as A,c as H,d as I}from"./index-36dabd7a.js";import{E as J}from"./index-38a4db7f.js";const W={class:"app-container"},G={class:"search-container"},L={class:"dialog-footer"},M=e({name:"DictData",inheritAttrs:!1,__name:"dict-item",props:{typeCode:{type:String,default:()=>""},typeName:{type:String,default:()=>""}},setup(e){const M=e;a((()=>M.typeCode),(e=>{ee.typeCode=e,te.typeCode=e,ie()}));const Q=l(B),X=l(B),Y=l(!1),Z=l([]),$=l(0),ee=t({pageNum:1,pageSize:10,typeCode:M.typeCode}),ae=l(),le=t({title:"",visible:!1}),te=t({status:1,typeCode:M.typeCode,sort:1}),oe=t({name:[{required:!0,message:"请输入字典名称",trigger:"blur"}],value:[{required:!0,message:"请输入字典值",trigger:"blur"}]});function se(){ee.typeCode&&(Y.value=!0,O(ee).then((({data:e})=>{ae.value=e.list,$.value=e.total})).finally((()=>Y.value=!1)))}function ie(){Q.value.resetFields(),ee.pageNum=1,se()}function de(e){Z.value=e.map((e=>e.id))}function re(e){le.visible=!0,e?(le.title="修改字典",P(e).then((({data:e})=>{Object.assign(te,e)}))):le.title="新增字典"}function ne(){X.value.validate((e=>{if(e){Y.value=!1;const e=te.id;e?A(e,te).then((()=>{v.success("修改成功"),ue(),ie()})).finally((()=>Y.value=!1)):H(te).then((()=>{v.success("新增成功"),ue(),ie()})).finally((()=>Y.value=!1))}}))}function ue(){le.visible=!1,X.value.resetFields(),X.value.clearValidate(),te.id=void 0,te.status=1,te.sort=1,te.typeCode=M.typeCode}function pe(e){const a=[e||Z.value].join(",");a?h.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{I(a).then((()=>{v.success("删除成功"),ie()}))})):v.warning("请勾选删除项")}return o((()=>{se()})),(a,l)=>{const t=V,o=D,v=K,h=C,O=w,P=B,A=T,H=S,I=z,M=J,me=E,ce=R,fe=F,ye=q,_e=N,ge=x,be=U,ve=j,he=s("hasPerm"),Ve=k;return i(),d("div",W,[r("div",G,[n(P,{ref_key:"queryFormRef",ref:Q,model:p(ee),inline:!0},{default:u((()=>[n(o,{label:"关键字",prop:"name"},{default:u((()=>[n(t,{modelValue:p(ee).name,"onUpdate:modelValue":l[0]||(l[0]=e=>p(ee).name=e),placeholder:"字典名称",clearable:""},null,8,["modelValue"])])),_:1}),n(o,null,{default:u((()=>[n(h,{type:"primary",onClick:se},{default:u((()=>[n(v),m("搜索")])),_:1}),n(h,{onClick:ie},{default:u((()=>[n(O),m("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),n(ye,{shadow:"never"},{header:u((()=>[c((i(),f(h,{type:"success",onClick:l[1]||(l[1]=e=>re())},{default:u((()=>[n(A),m("新增")])),_:1})),[[he,["sys:dict:add"]]]),c((i(),f(h,{type:"danger",disabled:0===p(Z).length,onClick:l[2]||(l[2]=e=>pe())},{default:u((()=>[n(H),m("删除")])),_:1},8,["disabled"])),[[he,["sys:dict:delete"]]])])),default:u((()=>[c((i(),f(ce,{data:p(ae),border:"",onSelectionChange:de},{default:u((()=>[n(I,{type:"selection",width:"50"}),n(I,{label:"字典名称",prop:"name"}),n(I,{label:"字典值",prop:"value"}),n(I,{label:"状态",align:"center"},{default:u((e=>[1===e.row.status?(i(),f(M,{key:0,type:"success"},{default:u((()=>[m("启用")])),_:1})):(i(),f(M,{key:1,type:"info"},{default:u((()=>[m("禁用")])),_:1}))])),_:1}),n(I,{fixed:"right",label:"操作",align:"center"},{default:u((e=>[c((i(),f(h,{type:"primary",link:"",onClick:a=>re(e.row.id)},{default:u((()=>[n(me),m("编辑")])),_:2},1032,["onClick"])),[[he,["sys:dict:edit"]]]),c((i(),f(h,{type:"primary",link:"",onClick:y((a=>pe(e.row.id)),["stop"])},{default:u((()=>[n(H),m("删除")])),_:2},1032,["onClick"])),[[he,["sys:dict:delete"]]])])),_:1})])),_:1},8,["data"])),[[Ve,p(Y)]]),p($)>0?(i(),f(fe,{key:0,total:p($),"onUpdate:total":l[3]||(l[3]=e=>_($)?$.value=e:null),page:p(ee).pageNum,"onUpdate:page":l[4]||(l[4]=e=>p(ee).pageNum=e),limit:p(ee).pageSize,"onUpdate:limit":l[5]||(l[5]=e=>p(ee).pageSize=e),onPagination:se},null,8,["total","page","limit"])):g("",!0)])),_:1}),n(ve,{modelValue:p(le).visible,"onUpdate:modelValue":l[11]||(l[11]=e=>p(le).visible=e),title:p(le).title,width:"500px",onClose:ue},{footer:u((()=>[r("div",L,[n(h,{type:"primary",onClick:ne},{default:u((()=>[m("确 定")])),_:1}),n(h,{onClick:ue},{default:u((()=>[m("取 消")])),_:1})])])),default:u((()=>[n(P,{ref_key:"dataFormRef",ref:X,model:p(te),rules:p(oe),"label-width":"100px"},{default:u((()=>[n(o,{label:"字典名称"},{default:u((()=>[m(b(e.typeName),1)])),_:1}),n(o,{label:"字典名称",prop:"name"},{default:u((()=>[n(t,{modelValue:p(te).name,"onUpdate:modelValue":l[6]||(l[6]=e=>p(te).name=e),placeholder:"请输入字典名称"},null,8,["modelValue"])])),_:1}),n(o,{label:"字典值",prop:"value"},{default:u((()=>[n(t,{modelValue:p(te).value,"onUpdate:modelValue":l[7]||(l[7]=e=>p(te).value=e),placeholder:"字典值"},null,8,["modelValue"])])),_:1}),n(o,{label:"排序",prop:"sort"},{default:u((()=>[n(_e,{modelValue:p(te).sort,"onUpdate:modelValue":l[8]||(l[8]=e=>p(te).sort=e),"controls-position":"right",min:0},null,8,["modelValue"])])),_:1}),n(o,{label:"状态",prop:"status"},{default:u((()=>[n(be,{modelValue:p(te).status,"onUpdate:modelValue":l[9]||(l[9]=e=>p(te).status=e)},{default:u((()=>[n(ge,{label:1},{default:u((()=>[m("正常")])),_:1}),n(ge,{label:0},{default:u((()=>[m("停用")])),_:1})])),_:1},8,["modelValue"])])),_:1}),n(o,{label:"备注",prop:"remark"},{default:u((()=>[n(t,{modelValue:p(te).remark,"onUpdate:modelValue":l[10]||(l[10]=e=>p(te).remark=e),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}});export{M as _};
